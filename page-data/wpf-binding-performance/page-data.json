{"componentChunkName":"component---src-templates-blog-post-js","path":"/wpf-binding-performance/","result":{"data":{"site":{"siteMetadata":{"title":"LAP TECH"}},"markdownRemark":{"id":"b9d2d2d6-13d9-59c9-8b5a-a118ff626075","excerpt":"今日黎試下 WPF 嘅 Data Binding Performance 跟據 Microsoft 喺 Developer Guide 入面寫過 Data Binding 需要留意以下幾點: 當需要大量  嘅時候，1000 個 Single Property Object 會快過 1 個 1000 Properties…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/77415045782bbb9a74c380379ed6b591/28be2/cover.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeVlAg//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAACAwEAAAAAAAAAAAAAAAAAARARITH/2gAIAQEAAT8hvCjB8U//2gAMAwEAAgADAAAAEGPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQEAAwEAAAAAAAAAAAAAAREAIVFhgf/aAAgBAQABPxCG2Vz4nx07O4AKUzrv/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Binding\"\n        title=\"Binding\"\n        src=\"/static/77415045782bbb9a74c380379ed6b591/1c72d/cover.jpg\"\n        srcset=\"/static/77415045782bbb9a74c380379ed6b591/a80bd/cover.jpg 148w,\n/static/77415045782bbb9a74c380379ed6b591/1c91a/cover.jpg 295w,\n/static/77415045782bbb9a74c380379ed6b591/1c72d/cover.jpg 590w,\n/static/77415045782bbb9a74c380379ed6b591/28be2/cover.jpg 786w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>今日黎試下 WPF 嘅 Data Binding Performance</p>\n<p>跟據 Microsoft 喺 Developer Guide 入面寫過 Data Binding 需要留意以下幾點:</p>\n<ol>\n<li>當需要大量 <code class=\"language-text\">Data Binding</code> 嘅時候，1000 個 Single Property Object 會快過 1 個 1000 Properties 嘅 Object</li>\n<li><code class=\"language-text\">ItemsSource</code> 用 <code class=\"language-text\">ObservableCollection</code> 會比 <code class=\"language-text\">IEnumerable</code> 好</li>\n</ol>\n<h3>大量 Data Binding 嘅處理</h3>\n<p>以下有一個 C# Object</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ThousandsStringViewModel</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">string</span></span> Property1 <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">string</span></span> Property2 <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">string</span></span> Property3 <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">string</span></span> Property1000 <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>上面嘅 Object 就直接打晒 1000 個 Properties 出黎, 跟據 Microsoft 嘅講法呢個 Structure 係會比較慢架</p>\n<p>以下就有一個 Single Property Object</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ValueBase<span class=\"token punctuation\">&lt;</span>T<span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">string</span></span> Value <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>之後就係 ViewModel 入面建立番 1000 個同樣既 Single Property Object</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ThousandsValueBaseViewModel</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\">ValueBase<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span> Property1 <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\">ValueBase<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span> Property2 <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\">ValueBase<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span> Property3 <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\">ValueBase<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">></span></span> Property1000 <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>String Base</th>\n<th>Value Base</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Trial 1</td>\n<td>42</td>\n<td>36</td>\n</tr>\n<tr>\n<td>Trial 2</td>\n<td>48</td>\n<td>38</td>\n</tr>\n<tr>\n<td>Trial 3</td>\n<td>52</td>\n<td>41</td>\n</tr>\n<tr>\n<td>Trial 4</td>\n<td>46</td>\n<td>33</td>\n</tr>\n<tr>\n<td>Trial 5</td>\n<td>37</td>\n<td>38</td>\n</tr>\n<tr>\n<td>Avg.</td>\n<td>45</td>\n<td>37.2</td>\n</tr>\n</tbody>\n</table>\n<p>從以上數據所得, Single Property Object 係 render time 上面的確比較快</p>","frontmatter":{"title":"WPF Binding performance","date":"July 30, 2020"}}},"pageContext":{"slug":"/wpf-binding-performance/","previous":{"fields":{"slug":"/wpf-highlight/"},"frontmatter":{"title":"WPF 的瑩光筆"}},"next":{"fields":{"slug":"/wpf-richtextbox-hyperlink/"},"frontmatter":{"title":"如何避免 RichTextBox Hyperlink Copy throw exception"}}}}}